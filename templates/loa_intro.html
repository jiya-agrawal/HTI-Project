<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTI Experiment - LOA Introduction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <div class="progress-bar">
            <div class="progress-fill" style="width: {{ (step / 4) * 100 }}%"></div>
        </div>
        
        <div class="progress-indicator">
            <span>Puzzle {{ step }} of 4</span>
        </div>
        
        <div class="loa-intro-card">
            <h1>{{ loa_info.title }}</h1>
            
            <div class="loa-description">
                <p class="description-text">{{ loa_info.description }}</p>
            </div>
            
            <div class="loa-instructions">
                <h3>ðŸ“‹ Instructions:</h3>
                <p>{{ loa_info.instructions }}</p>
            </div>
            
            <!-- {% if loa_info.disclaimer %}
            <div class="ai-disclaimer">
                {{ loa_info.disclaimer }}
            </div>
            {% endif %} -->
            
            <div class="loa-details">
                <div class="detail-section">
                    <h3>ðŸ‘¤ Your Role:</h3>
                    {% if loa_info.your_role %}
                    <ul class="role-list">
                        {% for item in loa_info.your_role %}
                            {% if item is mapping %}
                                <li>{{ item.text | safe }}
                                    {% if item.sub_items %}
                                    <ul class="sub-role-list">
                                        {% for sub_item in item.sub_items %}
                                        <li>{{ sub_item | safe }}</li>
                                        {% endfor %}
                                    </ul>
                                    {% endif %}
                                </li>
                            {% else %}
                                <li>{{ item | safe }}</li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                    {% else %}
                    <p><em>You will solve this puzzle entirely on your own with no AI involvement.</em></p>
                    {% endif %}
                </div>
                
                <div class="detail-section">
                    <h3>ðŸ¤– AI Role:</h3>
                    {% if loa_info.ai_role %}
                    <ul class="role-list">
                        {% for item in loa_info.ai_role %}
                            {% if item is mapping %}
                                <li>{{ item.text | safe }}
                                    {% if item.sub_items %}
                                    <ul class="sub-role-list">
                                        {% for sub_item in item.sub_items %}
                                        <li>{{ sub_item | safe }}</li>
                                        {% endfor %}
                                    </ul>
                                    {% endif %}
                                </li>
                            {% else %}
                                <li>{{ item | safe }}</li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                    {% else %}
                    <p><em>No AI assistance in this level.</em></p>
                    {% endif %}
                </div>
            </div>
            
            <div class="button-container">
                <button id="begin-puzzle-btn" class="btn btn-primary">Begin Puzzle</button>
            </div>

            {% if loa_info.disclaimer %}
            <div class="ai-disclaimer">
                {{ loa_info.disclaimer }}
            </div>
            {% endif %}

        </div>
    </div>
    
    <script>
        document.getElementById('begin-puzzle-btn').addEventListener('click', () => {
            window.location.href = '/puzzle';
        });
    </script>
</body>
</html>
